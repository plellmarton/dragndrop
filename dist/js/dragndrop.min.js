function DragNDrop(t,e){this.Container=null,this.Repository=[],this.DropZone=[],this.data={},this.PlaceHolder="",this.init(t,e)}DragNDrop.prototype={init:function(t,e){this.Container=t,this.data={repository:e.repository,dropzone:[]},this.update(),this.Repository=this.Container.querySelectorAll('[data-ref="repository"]')[0],this.DropZone=this.Container.querySelectorAll('[data-ref="dropzone"]')[0];var a=document.createElement("div");a.className="dragndrop__placeholder",this.PlaceHolder=a,this.events()},renderItem:function(t,e){var a='<div class="dragndrop__item" draggable="true" data-ref="item" data-id="{{img.id}}" data-index="{{index}}"><img src="{{img.src}}" alt="{{img.name}}" draggable="false"><span class="dragndrop__item-name" draggable="false">{{img.name}}</span></div>',r={"{{index}}":e,"{{img.id}}":t.id,"{{img.src}}":t.url,"{{img.name}}":t.name};return a=a.replace(/{{img.src}}|{{img.name}}|{{img.id}}|{{index}}/gi,function(t){return r[t]})},update:function(){var t=this.render();this.Container.innerHTML=t,console.log(this.data)},events:function(){this.Container.addEventListener("dragstart",this.dragStartHandler.bind(this)),this.Container.addEventListener("drag",this.dragHandler),this.Container.addEventListener("dragend",this.dragEndHandler.bind(this)),this.Container.addEventListener("drop",this.dropHandler.bind(this)),this.Container.addEventListener("dragover",this.dragOverHandler)},dragStartHandler:function(t){var e=t.target,a=t.path[1].getAttribute("data-ref"),r=parseInt(e.getAttribute("data-index")),i=t.target.cloneNode(!0);i.style.display="none",i.style.visibility="hidden",document.body.appendChild(i),t.dataTransfer.setDragImage(i,0,0),t.dataTransfer.setData("moveFrom",a),t.dataTransfer.setData("item",JSON.stringify(this.data[a][r])),t.dataTransfer.setData("itemIndex",r)},dragHandler:function(t){var e=t.target,a=e.offsetWidth,r=e.offsetHeight;e.style.width=a+"px",e.style.position="absolute",e.style.top=t.clientY-r/2+"px",e.style.left=t.clientX-a/2+"px",e.style.transform="rotate(5deg)",e.style.zIndex=1e3,e.style.pointerEvents="none"},dragOverHandler:function(t){var e=t.target.getAttribute("data-ref");"dropzone"===e?t.preventDefault():"repository"===e?t.preventDefault():"item"===t.path[1].getAttribute("data-ref")&&t.preventDefault()},dragEndHandler:function(t){var e=t.target,a=t.path[1].getAttribute("data-ref"),r=parseInt(e.getAttribute("data-index"));e.style.width="",e.style.position="",e.style.top="",e.style.left="",e.style.transform="rotate(0)",e.style.zIndex="",e.style.pointerEvents="",t.dataTransfer.setData("moveFrom",a),t.dataTransfer.setData("item",JSON.stringify(this.data[a][r])),t.dataTransfer.setData("itemIndex",r)},dropHandler:function(t){var e=t.dataTransfer.getData("moveFrom"),a=JSON.parse(t.dataTransfer.getData("item")),r=t.dataTransfer.getData("itemIndex"),i=t.target.getAttribute("data-ref"),n=!1;if(null===i){i=t.path[2].getAttribute("data-ref");var d=t.path[1],s=parseInt(d.getAttribute("data-index"));n=!0}console.log(i);var o=this.data;o[e].splice(parseInt(r),1),void 0===o[i]&&(o[i]=[]),n?o[i].splice(s,0,a):o[i].push(a),this.data=o,this.update()},render:function(){var t='<div class="dragndrop__repository" data-ref="repository">{{repository.items}}</div><div class="dragndrop__dropzone" data-ref="dropzone">{{dropzone.items}}</div>',e={"{{repository.items}}":this.data.repository.map(function(t,e){return this.renderItem(t,e)}.bind(this)).toString().replace(/,/gi,""),"{{dropzone.items}}":void 0!==this.data.dropzone?this.data.dropzone.map(function(t,e){return this.renderItem(t,e)}.bind(this)).toString().replace(/,/gi,""):""};return t=t.replace(/{{repository.items}}|{{dropzone.items}}/gi,function(t){return e[t]})}};
//# sourceMappingURL=maps/dragndrop.min.js.map
