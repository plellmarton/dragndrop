function DragNDrop(t,e){this.Container=null,this.Repository=[],this.DropZone=[],this.data={},this.PlaceHolder="",this.init(t,e)}DragNDrop.prototype={init:function(t,e){this.Container=t,this.data={repository:e.repository,dropzone:[]},this.update(),this.Repository=this.Container.querySelectorAll('[data-ref="repository"]')[0],this.DropZone=this.Container.querySelectorAll('[data-ref="dropzone"]')[0];var r=document.createElement("div");r.className="dragndrop__placeholder",this.PlaceHolder=r,this.events()},renderItem:function(t,e){var r='<div class="dragndrop__item" draggable="true" data-ref="item" data-id="{{img.id}}" data-index="{{index}}"><img src="{{img.src}}" alt="{{img.name}}" draggable="false"><span class="dragndrop__item-name" draggable="false">{{img.name}}</span><i class="dragndrop__item-index">{{index1}}</i></div>',a={"{{index}}":e,"{{index1}}":e+1,"{{img.id}}":t.id,"{{img.src}}":t.url,"{{img.name}}":t.name};return r=r.replace(/{{img.src}}|{{img.name}}|{{img.id}}|{{index}}|{{index1}}/gi,function(t){return a[t]})},update:function(){var t=this.render();this.Container.innerHTML=t},events:function(){this.Container.addEventListener("dragstart",this.dragStartHandler.bind(this)),this.Container.addEventListener("drag",this.dragHandler),this.Container.addEventListener("dragend",this.dragEndHandler.bind(this)),this.Container.addEventListener("drop",this.dropHandler.bind(this)),this.Container.addEventListener("dragover",this.dragOverHandler.bind(this))},dragStartHandler:function(t){var e=t.target,r=t.path[1].getAttribute("data-ref"),a=parseInt(e.getAttribute("data-index")),i=t.target.cloneNode(!0);i.style.display="none",i.style.visibility="hidden",document.body.appendChild(i),t.dataTransfer.setDragImage(i,0,0),t.dataTransfer.setData("moveFrom",r),t.dataTransfer.setData("item",JSON.stringify(this.data[r][a])),t.dataTransfer.setData("itemIndex",a)},dragHandler:function(t){var e=t.target,r=e.offsetWidth,a=e.offsetHeight;e.style.width=r+"px",e.style.position="absolute",e.style.top=t.clientY-a/2+"px",e.style.left=t.clientX-r/2+"px",e.style.transform="rotate(5deg)",e.style.zIndex=1e3,e.style.pointerEvents="none"},dragOverHandler:function(t){var e=t.target.getAttribute("data-ref");this.Container.querySelectorAll(".insert-placeholder").forEach(function(t){t.classList.remove("insert-placeholder")}),"dropzone"===e?t.preventDefault():"repository"===e?t.preventDefault():"item"===t.path[1].getAttribute("data-ref")&&(t.preventDefault(),t.path[1].classList.add("insert-placeholder"))},dragEndHandler:function(t){var e=t.target,r=t.path[1].getAttribute("data-ref"),a=parseInt(e.getAttribute("data-index"));e.style.width="",e.style.position="",e.style.top="",e.style.left="",e.style.transform="rotate(0)",e.style.zIndex="",e.style.pointerEvents="",t.dataTransfer.setData("moveFrom",r),t.dataTransfer.setData("item",JSON.stringify(this.data[r][a])),t.dataTransfer.setData("itemIndex",a)},dropHandler:function(t){var e=t.dataTransfer.getData("moveFrom"),r=JSON.parse(t.dataTransfer.getData("item")),a=t.dataTransfer.getData("itemIndex"),i=t.target.getAttribute("data-ref"),n=!1;if(null===i){i=t.path[2].getAttribute("data-ref");var d=t.path[1],s=parseInt(d.getAttribute("data-index"));n=!0}var o=this.data;o[e].splice(parseInt(a),1),void 0===o[i]&&(o[i]=[]),n?o[i].splice(s,0,r):o[i].push(r),this.data=o,this.update()},render:function(){var t='<div class="dragndrop__repository" data-ref="repository">{{repository.items}}</div><div class="dragndrop__dropzone" data-ref="dropzone">{{dropzone.items}}</div>',e={"{{repository.items}}":this.data.repository.map(function(t,e){return this.renderItem(t,e)}.bind(this)).toString().replace(/,/gi,""),"{{dropzone.items}}":void 0!==this.data.dropzone?this.data.dropzone.map(function(t,e){return this.renderItem(t,e)}.bind(this)).toString().replace(/,/gi,""):""};return t=t.replace(/{{repository.items}}|{{dropzone.items}}/gi,function(t){return e[t]})}};
//# sourceMappingURL=maps/dragndrop.min.js.map
